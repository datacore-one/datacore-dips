# DIP-0003: Scaffolding Pattern

| Field | Value |
|-------|-------|
| **DIP** | 0003 |
| **Title** | Scaffolding Pattern |
| **Author** | Gregor |
| **Type** | Standard |
| **Status** | Draft |
| **Created** | 2025-12-01 |
| **Updated** | 2025-12-01 |
| **Tags** | `scaffolding`, `knowledge`, `projects`, `modules` |
| **Affects** | `datacore-org/`, `spaces/`, `projects/` |
| **Specs** | SCAFFOLDING.md |
| **Agents** | `space-initializer`, `scaffolding-auditor` |

## Summary

Define a standardized scaffolding pattern that specifies which foundational documents every organization needs, applies the layered context pattern (DIP-0002) to scaffolding itself, and treats projects as complete modules containing both code and documentation.

## Motivation

Organizations need consistent structure to operate effectively with AI agents. Without a defined scaffolding:

1. **Teams don't know what documents they need** - leading to gaps in strategy, processes, and institutional knowledge
2. **AI agents lack context** - they can't operate effectively without foundational docs (mission, values, workflows)
3. **Projects are incomplete** - code repos lack the surrounding documentation that makes them understandable
4. **Knowledge doesn't compound** - without structure, organizational learning is ad-hoc

The scaffolding pattern addresses this by:
- Defining expected documents at space and project levels
- Using layered context for customization
- Enabling agents to audit completeness and generate drafts
- Creating a contribution pathway for discovering new document types

## Specification

### Scaffolding Layers (per DIP-0002)

Scaffolding uses the same layered pattern as CLAUDE.md:

```
space/
├── SCAFFOLDING.base.md     # PUBLIC - generic template from datacore-org
├── SCAFFOLDING.space.md    # SPACE - space-specific additions
├── SCAFFOLDING.local.md    # PRIVATE - personal tracking (gitignored)
└── SCAFFOLDING.md          # Composed - status tracking (gitignored)
```

**SCAFFOLDING.base.md** (upstream template):
- Defines universal document categories
- Lists expected documents with paths and purposes
- Provides templates/stubs for each document type
- Updated via PRs when teams discover new required docs

**SCAFFOLDING.space.md** (space customization):
- Adds space-specific document types
- Tracks document status (exists/missing/draft)
- Contains space-specific projects and their docs

**SCAFFOLDING.md** (composed output):
- Generated by context_merge.py
- Used by scaffolding-auditor agent
- Shows complete picture with status

### Document Categories

The scaffolding defines documents across these categories:

| Category | Purpose | Examples |
|----------|---------|----------|
| **Identity** | Who we are | Purpose, Vision, Mission, Values, Principles |
| **Strategy** | Where we're going | Strategy, Positioning, North Star Metric |
| **Brand** | How we present | Brand Guidelines, Voice & Tone, Glossary |
| **Sensing** | What we're watching | Competitor Map, Market Landscape, Trend Radar |
| **Memory** | What we know | Zettelkasten structure, Literature notes, Reference |
| **Reasoning** | How we think | Analysis frameworks, Decision templates |
| **Action** | How we execute | Playbooks, Processes, Standards, Templates |
| **Learning** | How we improve | Feedback capture, Retrospectives, Experiments |
| **Coordination** | How we align | Communication channels, Rhythms, Handoffs |
| **Metrics** | How we measure | North Star, Health metrics, OKRs |

### Project Module Structure

Projects are complete modules, not just code repos. Every project repo should contain:

```
project-name/
├── CLAUDE.md               # Project context (layered)
├── README.md               # Standard readme
├── CANVAS.md               # Project canvas/charter
├── ROADMAP.md              # Project-specific roadmap
├── IMPLEMENTATION.md       # Technical implementation plan
├── CHANGELOG.md            # Version history
│
├── docs/                   # Project documentation
│   ├── architecture.md     # Technical architecture
│   ├── api.md              # API documentation
│   └── setup-guide.md      # Getting started
│
├── .datacore/              # Datacore integration
│   ├── module.yaml         # Module metadata
│   └── agents/             # Project-specific agents
│
└── src/                    # Source code
```

**Required project documents** (validated by scaffolding-auditor):

| Document | Purpose | Required |
|----------|---------|----------|
| `README.md` | Project overview | Yes |
| `CLAUDE.md` | AI context | Yes |
| `CANVAS.md` | Project charter (why, what, who, when) | Yes |
| `ROADMAP.md` | Feature/milestone roadmap | Recommended |
| `IMPLEMENTATION.md` | Technical plan | Recommended |
| `docs/setup-guide.md` | Getting started | Yes |

### Symlinks for Cross-Reference

When project docs need to appear in space folders (e.g., roadmap in product track):

```bash
# In space's 1-tracks/product/roadmaps/
ln -s ../../../2-projects/verity/ROADMAP.md verity-roadmap.md
```

The `space-initializer` agent generates these symlinks based on scaffolding configuration.

### Contribution Workflow

When a team discovers a missing document type:

```
┌─────────────────────────────────────────────────────────────────┐
│  1. DISCOVER GAP                                                │
│     Team realizes they need a document type not in scaffolding  │
│     Example: "We need a Privacy Policy template"                │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  2. CREATE DOCUMENT                                             │
│     Team creates their space-specific version                   │
│     Example: 1-datafund/1-tracks/legal/privacy-policy.md        │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  3. PROPOSE TO SCAFFOLDING                                      │
│     PR to datacore-org adding document type to SCAFFOLDING.base │
│     Includes: path pattern, purpose, template/stub              │
└─────────────────────────────────────────────────────────────────┘
                              │
                              ▼
┌─────────────────────────────────────────────────────────────────┐
│  4. OPTIONAL: CREATE MODULE                                     │
│     If document has reusable content (not just structure),      │
│     create a module (e.g., datacore-privacy)                    │
└─────────────────────────────────────────────────────────────────┘
```

### New Components

#### SCAFFOLDING.base.md Template

Location: `datacore-org/SCAFFOLDING.base.md`

```markdown
# Organization Scaffolding

> The cognitive architecture of a self-learning organization.

## 1. IDENTITY

| Document | Path | Purpose |
|----------|------|---------|
| Purpose Statement | `3-knowledge/pages/_core/purpose.md` | Why we exist |
| Vision | `3-knowledge/pages/_core/vision.md` | Where we're going (10yr) |
| Mission | `3-knowledge/pages/_core/mission.md` | How we get there (3yr) |
| Values | `3-knowledge/pages/_core/values.md` | What we won't compromise |
| Principles | `3-knowledge/pages/_core/principles.md` | Decision guidelines |

## 2. STRATEGY
...

## PROJECT REQUIREMENTS

Every project module must include:

| Document | Purpose | Template |
|----------|---------|----------|
| README.md | Overview | [link] |
| CLAUDE.md | AI context | [link] |
| CANVAS.md | Project charter | [link] |
...
```

#### space-initializer Agent

Triggers on new space creation. Actions:
1. Copy SCAFFOLDING.base.md from datacore-org
2. Generate stub files for all required documents
3. Create project folder structure
4. Generate symlinks per configuration
5. Mark all docs as `status: stub` in SCAFFOLDING.space.md

#### scaffolding-auditor Agent

Runs weekly or on-demand. Actions:
1. Read composed SCAFFOLDING.md
2. Check existence of all listed documents
3. Update status (missing/stub/draft/reviewed/published)
4. Report coverage metrics
5. Flag documents needing human review
6. Suggest missing document types based on usage patterns

### Interface Changes

New files in datacore-org:
- `SCAFFOLDING.base.md` - Generic scaffolding template
- `templates/` folder with document stubs

New agents:
- `space-initializer` - Creates space from template
- `scaffolding-auditor` - Validates completeness

## Rationale

**Why layered scaffolding?**
- Generic template allows upstream improvements
- Space layer captures organization-specific needs
- Status tracking is local (may contain sensitive coverage info)

**Why projects as modules?**
- Code without context is incomplete
- Docs in repo stay in sync with code
- AI agents need project context to assist effectively
- Standard structure enables automation

**Why symlinks?**
- Single source of truth (in project repo)
- Docs appear in relevant space locations
- Changes propagate automatically

**Alternatives considered:**
- Copying docs to multiple locations (rejected: sync issues)
- Only code in repos (rejected: loses context)
- No scaffolding (rejected: inconsistent structure)

## Backwards Compatibility

- Existing spaces without scaffolding continue to work
- `scaffolding-auditor` can generate initial SCAFFOLDING.space.md from existing structure
- Projects without standard docs get warnings, not errors

## Security Considerations

- SCAFFOLDING.md (composed) may reveal organizational gaps - gitignore if sensitive
- Project docs may contain strategy - respect visibility settings
- Symlinks only within space (no cross-space links)

## Implementation

### Phase 1: Template Creation
1. Create SCAFFOLDING.base.md in datacore-org
2. Create document templates/stubs
3. Update DIP-0002 to reference scaffolding

### Phase 2: Agent Implementation
1. Implement space-initializer agent
2. Implement scaffolding-auditor agent
3. Test with 2-datacore space

### Phase 3: Migration
1. Generate SCAFFOLDING.space.md for existing spaces
2. Add missing project docs as stubs
3. Document contribution workflow

## Open Questions

1. Should scaffolding coverage be a space health metric?
2. How to handle documents that span multiple categories?
3. Should there be a "minimum viable scaffolding" for quick starts?

## References

- [DIP-0002: Layered Context Pattern](./DIP-0002-layered-context-pattern.md)
- [DIP-0001: Contribution Model](./DIP-0001-contribution-model.md)
- McKinsey (2025): "The Agentic Organization"
- Peter Senge: "The Fifth Discipline"
- HBR (2024): "A New Approach to Knowledge-Sharing Within Organizations"
